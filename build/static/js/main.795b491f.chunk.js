(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(15),a=n.n(o),i=(n(20),n(6)),u=n(3),d=n(0),s=function(e){var t=e.type,n=e.onClick,c=e.text;return Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:t,onClick:n,children:c})})},b=function(e){var t=e.id,n=e.name,c=e.number,r=e.handleDelete;return Object(d.jsxs)("div",{children:[n," - ",c,Object(d.jsx)(s,{type:"submit",onClick:r(n,t),text:"delete"})]})},j=function(e){var t=e.people,n=e.handleDelete;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(d.jsx)(b,{id:e.id,name:e.name,number:e.number,handleDelete:n},e.id)}))]})},l=function(e){var t=e.text,n=e.value,c=e.onChange;return Object(d.jsxs)("div",{children:[t," ",Object(d.jsx)("input",{value:n,onChange:c})]})},f=function(e){var t=e.message;return t?Object(d.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t}):t},h=function(e){var t=e.message;return t?Object(d.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t}):t},m=n(4),O=n.n(m),x="/api/people",p=function(){return O.a.get(x).then((function(e){return e.data}))},g=function(e){return O.a.post(x,e).then((function(e){return e.data}))},v=function(e,t){return O.a.put("".concat(x,"/").concat(e),t).then((function(e){return e.data}))},y=function(e){return O.a.delete("".concat(x,"/").concat(e))},C=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(u.a)(o,2),b=a[0],m=a[1],O=Object(c.useState)(""),x=Object(u.a)(O,2),C=x[0],k=x[1],S=Object(c.useState)(""),w=Object(u.a)(S,2),D=w[0],B=w[1],F=Object(c.useState)(""),L=Object(u.a)(F,2),P=L[0],T=L[1],z=Object(c.useState)(""),A=Object(u.a)(z,2),E=A[0],I=A[1],J=3e3,R=function(e,t,n){e(t),setTimeout((function(){return e("")}),n)};Object(c.useEffect)((function(){return p().then((function(e){return r(e)}))}),[]);var M=function(e){return function(t){return e(t.target.value)}},N=function(e){if(window.confirm("".concat(e.name," has already been added to this phonebook. Do you wish to update their number?"))){var t=Object(i.a)(Object(i.a)({},e),{},{number:C});v(e.id,t).then((function(t){r(n.map((function(n){return n.id!==e.id?n:t}))),m(""),k(""),R(T,"Updated ".concat(t.name,"'s number!"),J)}))}},U=function(){g({name:b,number:C}).then((function(e){r(n.concat(e)),m(""),k(""),R(T,"Added ".concat(e.name,"!"),J)})).catch((function(e){return R(I,e.response.data.error,J)}))},q=n.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(f,{message:P}),Object(d.jsx)(h,{message:E}),Object(d.jsx)(l,{text:"search by name",value:D,onChange:M(B)}),Object(d.jsxs)("form",{children:[Object(d.jsx)("h2",{children:"Add new number"}),Object(d.jsx)(l,{text:"name: ",value:b,onChange:M(m)}),Object(d.jsx)(l,{text:"number: ",value:C,onChange:M(k)}),Object(d.jsx)(s,{type:"submit",onClick:function(e){e.preventDefault();var t=n.find((function(e){return e.name===b}));t?N(t):U()},text:"add"})]}),Object(d.jsx)(j,{people:q,handleDelete:function(e,t){return function(){window.confirm("Delete ".concat(e,"?"))&&y(t).then((function(){r(n.filter((function(e){return e.id!==t}))),R(T,"Deleted ".concat(e,"!"),J)})).catch((function(c){R(I,"".concat(e," has already been deleted from the server"),3e3),r(n.filter((function(e){return e.id!==t})))}))}}})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),k()}},[[40,1,2]]]);
//# sourceMappingURL=main.795b491f.chunk.js.map